
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Shynixn">
      
      
      
        <link rel="prev" href="../installation/">
      
      
        <link rel="next" href="../plugin/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Kotlin Coroutines and Minecraft Plugins - MCCoroutine</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2afb09e1.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kotlin-coroutines-and-minecraft-plugins" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="MCCoroutine" class="md-header__button md-logo" aria-label="MCCoroutine" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MCCoroutine
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Kotlin Coroutines and Minecraft Plugins
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Shynixn/MCCoroutine" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href=".." class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../faq/" class="md-tabs__link">
        
  
  
    
  
  FAQ

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="MCCoroutine" class="md-nav__button md-logo" aria-label="MCCoroutine" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    MCCoroutine
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Shynixn/MCCoroutine" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Kotlin Coroutines and Minecraft Plugins
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Kotlin Coroutines and Minecraft Plugins
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#starting-a-coroutine" class="md-nav__link">
    <span class="md-ellipsis">
      Starting a coroutine
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#switching-coroutine-context" class="md-nav__link">
    <span class="md-ellipsis">
      Switching coroutine context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plugin-launch-execution-order" class="md-nav__link">
    <span class="md-ellipsis">
      Plugin launch Execution order
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coroutines-everywhere" class="md-nav__link">
    <span class="md-ellipsis">
      Coroutines everywhere
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Suspending Plugin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../listener/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Suspending Listeners
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commandexecutor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Suspending CommandExecutors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Suspending Delayed, Repeating Tasks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../caching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Suspending Caches, Background Repeating Tasks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugindisable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Coroutines in onDisable
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exception/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exception Handling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../timings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Timing Measurements
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../unittests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Unit-Testing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#starting-a-coroutine" class="md-nav__link">
    <span class="md-ellipsis">
      Starting a coroutine
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#switching-coroutine-context" class="md-nav__link">
    <span class="md-ellipsis">
      Switching coroutine context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plugin-launch-execution-order" class="md-nav__link">
    <span class="md-ellipsis">
      Plugin launch Execution order
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coroutines-everywhere" class="md-nav__link">
    <span class="md-ellipsis">
      Coroutines everywhere
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="kotlin-coroutines-and-minecraft-plugins">Kotlin Coroutines and Minecraft Plugins</h1>
<p>When starting with <a href="https://kotlinlang.org/docs/coroutines-basics.html">Coroutines in Kotlin</a>, you may wonder how 
you can use them for minecraft plugins and mods. This guide introduces concepts and a production ready API you can use, to start
adding coroutines to your project.</p>
<div class="admonition note">
<p class="admonition-title">Important</p>
<p>Make sure you have already installed MCCoroutine. See <a href="/gettingstarted">Installation</a> for details.</p>
</div>
<h3 id="starting-a-coroutine">Starting a coroutine</h3>
<p>In order to start a coroutine, you can use the provided <code>plugin.launch {}</code> extension method. This is safe to be called
anywhere in your plugin except in onDisable where you need to use <code>runBlocking</code>. However, keep in mind to <strong>avoid</strong> using <code>runblocking</code> anywhere else in any of your plugins.</p>
<ul>
<li>To enter a coroutine <strong>anywhere</strong> in your code at any time:</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="1:7"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><input id="__tabbed_1_5" name="__tabbed_1" type="radio" /><input id="__tabbed_1_6" name="__tabbed_1" type="radio" /><input id="__tabbed_1_7" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Bukkit</label><label for="__tabbed_1_2">BungeeCord</label><label for="__tabbed_1_3">Fabric</label><label for="__tabbed_1_4">Folia</label><label for="__tabbed_1_5">Sponge</label><label for="__tabbed_1_6">Velocity</label><label for="__tabbed_1_7">Minestom</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">com.github.shynixn.mccoroutine.bukkit.launch</span>
<span class="k">import</span><span class="w"> </span><span class="nn">org.bukkit.plugin.Plugin</span>

<span class="kd">fun</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">plugin</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// This will always be on the minecraft main thread.</span>
<span class="w">        </span><span class="c1">// If you have been on the minecraft main thread before calling plugin.launch, this scope is entered immediately without any delay.</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">com.github.shynixn.mccoroutine.bungeecord.launch</span>
<span class="k">import</span><span class="w"> </span><span class="nn">net.md_5.bungee.api.plugin.Plugin</span>

<span class="kd">fun</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">plugin</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// This a random thread on the bungeeCord threadPool.</span>
<span class="w">        </span><span class="c1">// If you have been on the bungeeCord threadPool before calling plugin.launch, this scope is executed in the next scheduler tick.</span>
<span class="w">        </span><span class="c1">// If you pass CoroutineStart.UNDISPATCHED, you can enter this scope in the current tick. This is shown in a code example below.</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Fabric has got 3 lifecycle scopes, the <code>ModInitializer</code> (both client and server) <code>ClientModInitializer</code> (client) and <code>DedicatedServerModInitializer</code> scope.
This guide gives only <code>DedicatedServerModInitializer</code> examples but it works in the same way for the other scopes.</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">com.github.shynixn.mccoroutine.fabric.launch</span>
<span class="k">import</span><span class="w"> </span><span class="nn">net.fabricmc.api.DedicatedServerModInitializer</span>

<span class="kd">fun</span><span class="w"> </span><span class="nf">foo</span><span class="p">(){</span>
<span class="w">    </span><span class="n">mod</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// This will always be on the minecraft main thread.</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>As Folia brings multithreading to Paper based servers, threading becomes a lot more complicated for plugin developers. </p>
<div class="admonition note">
<p class="admonition-title">Important</p>
<p>You can run mccoroutine-folia in standard Bukkit servers as well. MCCoroutine automatically falls back to the standard Bukkit 
scheduler if the Folia schedulers are not found and the rules for mccoroutine-bukkit start to apply.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Important</p>
<p>If you have been using mccoroutine for Bukkit before, you have to perform some restructuring in your plugin. <strong>Simply changing the imports is not enough.</strong>
<code>plugin.launch {}</code> works differently in Folia compared to Bukkit.</p>
</div>
<p>First, it is important to understand that Folia does not have a server main thread. In order to access minecraft resources you need to use the correct thread for 
a given resource. For an entity, you need to use the currently assigned thread for that entity. MCCoroutine provides dispatchers for each of these usecases in Folia
and automatically falls back to the Bukkit dispatchers when you launch your Folia plugin on a standard Bukkit server.</p>
<p>However, this does not solve the problem of accessing our own data in our plugins. We do not have a main thread, so we default on accessing our data on the incoming
thread. However, sometimes you have to make sure only 1 thread is accessing a resource at a time. This is important for ordering events and avoiding concurrency exceptions.
Concurrent collections can help with that but you may still need synchronize access in other places.</p>
<p>As a solution, MCCoroutine proposes that each plugin gets their own "main thread" and corresponding "mainDispatcher". It is intended to execute all the stuff the plugin is going to do.
Examples for this are retrieving and matching data like having a <code>List&lt;Game&gt;</code> or <code>List&lt;Arena&gt;</code> in minigame plugins. For minecraft actions, like teleporting a player, you start a sub context, computate the result and return it back to your personal main thread. This 
concepts result into the following code.</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">com.github.shynixn.mccoroutine.folia.launch</span>
<span class="k">import</span><span class="w"> </span><span class="nn">org.bukkit.plugin.Plugin</span>

<span class="kd">fun</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="n">entity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Entity</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">plugin</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// or plugin.launch(plugin.mainDispatcher) {}</span>
<span class="w">        </span><span class="c1">// Your plugin main thread. If you have already been on your plugin main thread, this scope is entered immidiatly.</span>
<span class="w">        </span><span class="c1">// Regardless if your are on bukkit or on folia, this is your personal thread and you must not call bukkit methods on it.</span>
<span class="w">        </span><span class="c1">// Now perform some data access on your plugin data like accessing a repository.</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">storedEntityDataInDatabase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">database</span><span class="p">.</span><span class="na">get</span><span class="p">()</span>

<span class="w">        </span><span class="c1">// Apply the data on the entity thread using the entityDispatcher.</span>
<span class="w">        </span><span class="c1">// The plugin.entityDispatcher(entity) parameter ensures, that we end up on the scheduler for the entity in the specific region.</span>
<span class="w">        </span><span class="n">withContext</span><span class="p">(</span><span class="n">plugin</span><span class="p">.</span><span class="na">entityDispatcher</span><span class="p">(</span><span class="n">entity</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="c1">// In Folia, this will be the correct thread for the given entity.</span>
<span class="w">              </span><span class="c1">// In Bukkit, this will be the main thread.</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">com.github.shynixn.mccoroutine.sponge.launch</span>
<span class="k">import</span><span class="w"> </span><span class="nn">org.spongepowered.api.plugin.PluginContainer</span>

<span class="kd">fun</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">plugin</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// This will always be on the minecraft main thread.</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">com.github.shynixn.mccoroutine.velocity.launch</span>
<span class="k">import</span><span class="w"> </span><span class="nn">com.velocitypowered.api.plugin.PluginContainer</span>

<span class="kd">fun</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">plugin</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// This will be a random thread on the Velocity threadpool</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Minestom has got 2 lifecycle scopes, the server scope and the extension scope.
When this guide talks about a <code>plugin</code>, the corresponding class in Minestom is <code>Extension</code> or <code>MinecraftServer</code> depending on your usecase.</p>
<p>Server level (if you are developing a new server):</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">com.github.shynixn.mccoroutine.minestom.launch</span>
<span class="k">import</span><span class="w"> </span><span class="nn">net.minestom.server.MinecraftServer</span>

<span class="kd">fun</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">server</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// This will always be on the minecraft main thread.</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Extension level (if you are developing a new extension): </p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">com.github.shynixn.mccoroutine.minestom.launch</span>
<span class="k">import</span><span class="w"> </span><span class="nn">net.minestom.server.extensions.Extension</span>

<span class="kd">fun</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">extension</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// This will always be on the minecraft main thread.</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="switching-coroutine-context">Switching coroutine context</h3>
<p>Later in the <a href="https://kotlinlang.org/docs/coroutine-context-and-dispatchers.html">Coroutines in Kotlin</a> guide, the terms
coroutine-context and dispatchers are explained.
A dispatcher determines what thread or threads the corresponding coroutine uses for its execution.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:7"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><input id="__tabbed_2_5" name="__tabbed_2" type="radio" /><input id="__tabbed_2_6" name="__tabbed_2" type="radio" /><input id="__tabbed_2_7" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Bukkit</label><label for="__tabbed_2_2">BungeeCord</label><label for="__tabbed_2_3">Fabric</label><label for="__tabbed_2_4">Folia</label><label for="__tabbed_2_5">Sponge</label><label for="__tabbed_2_6">Velocity</label><label for="__tabbed_2_7">Minestom</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>In Bukkit, MCCoroutine offers 2 custom dispatchers.</p>
<ul>
<li>minecraftDispatcher (Allows to execute coroutines on the main minecraft thread)</li>
<li>asyncDispatcher (Allows to execute coroutines on the async minecraft threadpool)</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Important</p>
<p>You may also use <code>Dispatchers.IO</code> instead of asyncDispatcher, to reduce the dependency on mccoroutine in your code.</p>
</div>
<p>An example how this works is shown below:</p>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">plugin</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// This will always be on the minecraft main thread.</span>
<span class="w">        </span><span class="c1">// If you have been on the minecraft main thread before calling plugin.launch, this scope is entered immediately without any delay.</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">result1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">withContext</span><span class="p">(</span><span class="n">plugin</span><span class="p">.</span><span class="na">minecraftDispatcher</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Perform operations on the minecraft main thread.</span>
<span class="w">            </span><span class="s">&quot;Player is &quot;</span><span class="w"> </span><span class="c1">// Optionally, return a result.</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// Here we are automatically back on the main thread again.</span>

<span class="w">        </span><span class="c1">// Prefer using Dispatchers.IO instead of asyncDispatcher </span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">result2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">withContext</span><span class="p">(</span><span class="n">Dispatchers</span><span class="p">.</span><span class="na">IO</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Perform operations asynchronously.</span>
<span class="w">            </span><span class="s">&quot; Max&quot;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// Here we are automatically back on the main thread again.</span>

<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="n">result1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">result2</span><span class="p">)</span><span class="w"> </span><span class="c1">// Prints &#39;Player is Max&#39;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Normally, you do not need to call <code>plugin.minecraftDispatcher</code> in your code. Instead, you are guaranteed to be always
on the minecraft main thread
in the <code>plugin.launch{}</code> scope and use sub coroutines (e.g. withContext) to perform asynchronous operations. Such a
case can be found below:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// This is a Bukkit example, but it works in the same way in every other framework.</span>
<span class="nd">@EventHandler</span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">onPlayerJoinEvent</span><span class="p">(</span><span class="n">event</span><span class="p">:</span><span class="w"> </span><span class="n">PlayerJoinEvent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">plugin</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// This will always be on the minecraft main thread.</span>
<span class="w">        </span><span class="c1">// A PlayerJoinEvent arrives on the main thread, therefore this scope is entered immediately without any delay.</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="na">player</span><span class="p">.</span><span class="na">name</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">listOfFriends</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">withContext</span><span class="p">(</span><span class="n">Dispatchers</span><span class="p">.</span><span class="na">IO</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// IO Thread</span>
<span class="w">            </span><span class="kd">val</span><span class="w"> </span><span class="nv">friendNames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Files</span><span class="p">.</span><span class="na">readAllLines</span><span class="p">(</span><span class="n">Paths</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;</span><span class="si">$</span><span class="n">name</span><span class="s">.txt&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="n">friendNames</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// Main Thread</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">friendText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">listOfFriends</span><span class="p">.</span><span class="na">joinToString</span><span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">)</span>
<span class="w">        </span><span class="n">event</span><span class="p">.</span><span class="na">player</span><span class="p">.</span><span class="na">sendMessage</span><span class="p">(</span><span class="s">&quot;My friends are: </span><span class="si">$</span><span class="n">friendText</span><span class="s">&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="plugin-launch-execution-order">Plugin launch Execution order</h3>
<p>If you use <code>plugin.launch</code>, it is important to understand the execution order.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// This is a Bukkit example, but it works in the same way in every other framework.</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">Foo</span><span class="p">(</span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">plugin</span><span class="p">:</span><span class="w"> </span><span class="n">Plugin</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">bar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Main Thread</span>
<span class="w">        </span><span class="c1">// If you have been on the minecraft main thread before calling plugin.launch, this scope is entered immediately without any delay.</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;I am first&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">job</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plugin</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;I am second&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// The context is not suspended when switching to the same suspendable context.</span>
<span class="w">            </span><span class="n">delay</span><span class="p">(</span><span class="m">1000</span><span class="p">)</span>
<span class="w">            </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;I am fourth&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// The context is given back after 1000 milliseconds and continuous here.</span>
<span class="w">            </span><span class="n">bob</span><span class="p">()</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// When calling delay the suspendable context is suspended and the original context immediately continuous here.</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;I am third&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">suspend</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">bob</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;I am fifth&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="s">&quot;I am first&quot;</span>
<span class="s">&quot;I am second&quot;</span>
<span class="s">&quot;I am third&quot;</span>
<span class="s">&quot;I am fourth&quot;</span>
<span class="s">&quot;I am fifth&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>In BungeeCord, MCCoroutine offers 1 custom dispatcher.</p>
<ul>
<li>bungeeCordDispatcher (Allows to execute coroutines on the bungeeCord threadpool)</li>
</ul>
<p>An example how this works is shown below:</p>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">plugin</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// This a random thread on the bungeeCord threadPool.</span>
<span class="w">        </span><span class="c1">// If you have been on the bungeeCord threadPool before calling plugin.launch, this scope is executed in the next scheduler tick.</span>
<span class="w">        </span><span class="c1">// If you pass CoroutineStart.UNDISPATCHED, you can enter this scope in the current tick. This is shown in a code example below.</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">withContext</span><span class="p">(</span><span class="n">Dispatchers</span><span class="p">.</span><span class="na">IO</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="c1">// Perform operations asynchronously.</span>
<span class="w">            </span><span class="s">&quot;Playxer is Max&quot;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// Here we are automatically back on a new random thread on the bungeeCord threadPool.</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="c1">// Prints &#39;Player is Max&#39;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">plugin</span><span class="p">.</span><span class="na">launch</span><span class="p">(</span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CoroutineStart</span><span class="p">.</span><span class="na">UNDISPATCHED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// This is the same thread before calling plugin.launch</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">withContext</span><span class="p">(</span><span class="n">Dispatchers</span><span class="p">.</span><span class="na">IO</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Perform operations asynchronously.</span>
<span class="w">            </span><span class="s">&quot;Playxer is Max&quot;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// Here we are automatically back on a new random thread on the bungeeCord threadPool.</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="c1">// Prints &#39;Player is Max&#39;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>TBD</p>
</div>
<div class="tabbed-block">
<p>In Folia, MCCoroutine offers 5 custom dispatchers.</p>
<ul>
<li>mainDispatcher (Your personal plugin main thread, allows to execute coroutines on it)</li>
<li>globalRegionDispatcher (Allows to execute coroutines on the global region. e.g. Global Game Rules)</li>
<li>regionDispatcher (Allows to execute coroutines on a specific location in a world)</li>
<li>entityDispatcher (Allows to execute coroutines on a specific entity)</li>
<li>asyncDispatcher (Allows to execute coroutines on the async thread pool)</li>
</ul>
<p>An example how this works is shown below:</p>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="n">location</span><span class="p">:</span><span class="w"> </span><span class="n">Location</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">plugin</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Ensures that you are now on your plugin thread.</span>

<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">resultBlockType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">withContext</span><span class="p">(</span><span class="n">plugin</span><span class="p">.</span><span class="na">regionDispatcher</span><span class="p">(</span><span class="n">location</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// In Folia, this will be the correct thread for the given location</span>
<span class="w">            </span><span class="c1">// In Bukkit, this will be the minecraft thread.</span>
<span class="w">            </span><span class="n">getTypeOfBlock</span><span class="p">()</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">myBlockTypeList</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">resultBlockType</span><span class="p">)</span>

<span class="w">        </span><span class="n">withContext</span><span class="p">(</span><span class="n">plugin</span><span class="p">.</span><span class="na">asyncDispatcher</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// save myBlockTypeList to file.</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>TBD</p>
</div>
<div class="tabbed-block">
<p>TBD</p>
</div>
<div class="tabbed-block">
<p>TBD</p>
</div>
</div>
</div>
<h3 id="coroutines-everywhere">Coroutines everywhere</h3>
<p>Using <code>plugin.launch{}</code>is valuable if you migrate existing plugins to use coroutines. However, if you write a new
plugin from scratch, you may consider using
convenience integrations provided by MCCoroutine such as:</p>
<ul>
<li>Suspending Plugin</li>
<li>Suspending Listeners</li>
<li>Suspending CommandExecutors</li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../installation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Installation">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Installation
              </div>
            </div>
          </a>
        
        
          
          <a href="../plugin/" class="md-footer__link md-footer__link--next" aria-label="Next: Suspending Plugin">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Suspending Plugin
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tabs", "content.tabs.link", "content.code.copy", "navigation.footer"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>